version: "3.8"

services:
  messaging:
    build:
      context: .
      dockerfile: messaging.dockerfile
    working_dir: /ap
    volumes: 
      - ./src/:/ap
    environment:
      DOTNET_EnableDiagnostics: 0

  portal:
    build: 
      context: .
      dockerfile: portal.dockerfile
    working_dir: /portal
    command: npm start -- --host 0.0.0.0 --poll 500
    volumes:
      - ./src/AP.Portal/:/portal
      - /portal/node_modules
    ports:
      - "80:4200"